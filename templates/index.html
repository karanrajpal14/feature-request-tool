{% extends "base.html" %}
{% block content %}
<section class="hero is-light is-fullheight">
    <!-- Hero head: will stick at the top -->
    <div class="hero-head">
        <div class="container has-text-centered">
            <h1 class="title">Feature Request Tool</h1>
        </div>
    </div>

    <!-- Hero content: will be in the middle -->
    <div class="hero-body">
        <div class="container">
            <div class="columns">
                <!-- Begin left section that holds the feature request cards -->
                <div class="column">
                    <!-- Begin nested columns for responsive layout -->
                    <div class="grid" data-bind="foreach: get_all_feature_requests">
                        <div class="box has-ribbon" data-bind="attr: {'id': id}" id="ebeb93bc-f535-4a5f-9164-4c2fc645659f">
                            <div class="ribbon is-dark is-small" data-bind="text: priority"></div>
                            <p class="title" id="feature_title" data-bind="text: title"></p>
                            <p class="subtitle" id="feature_description" data-bind="text: description"></p>
                            <nav class="level">
                                <div class="level-item">
                                    <p data-bind="text: client"></p>
                                </div>
                                <div class="level-item">
                                    <p data-bind="text: product_area"></p>
                                </div>
                                <div class="level-item">
                                    <p data-bind="text: deadline"></p>
                                </div>
                            </nav>
                            <div class="buttons has-addons is-centered">
                                <button class="button is-small is-rounded is-danger is-outlined" data-bind="click: $parent.delete">Delete</button>
                            </div>
                        </div>
                    </div>
                    <!-- End of nested columns -->
                </div>
                <!-- End of left section -->

                <!-- Begin form section for feature requests -->
                <div class="column is-one-quarter">
                    <form action="POST" data-bind="submit: save_form_input, validationOptions: {insertMessages: false}">
                        <!-- Title field -->
                        <div class="field">
                            <label class="label">Title</label>
                            <div class="control">
                                <input data-bind="value: title" class="input is-medium" type="text" placeholder="e.g Add a notch"
                                    id="title" />
                            </div>
                            <p class="help is-danger" data-bind="validationMessage: title"></p>
                        </div>

                        <!-- Description field -->
                        <div class="field">
                            <label class="label">Description</label>
                            <div class="control">
                                <textarea data-bind="value: description" class="textarea is-medium" placeholder="e.g. Because everyone's doing it"
                                    id="description"></textarea>
                            </div>
                            <p class="help is-danger" data-bind="validationMessage: description"></p>
                        </div>

                        <div class="columns">
                            <!-- Client name selector -->
                            <div class="column is-half">
                                <div class="field">
                                    <label class="label">Client</label>
                                    <div class="control is-expanded">
                                        <div class="select is-fullwidth is-medium">
                                            <select data-bind="options: clients, value: selected_client, optionsCaption: 'Select Client'"
                                                id="client">
                                            </select>
                                        </div>
                                    </div>
                                    <p class="help is-danger" data-bind="validationMessage: selected_client"></p>
                                </div>
                            </div>

                            <!-- Feature request priority selector -->
                            <div class="column is-half">
                                <div class="field">
                                    <label class="label">Priority</label>
                                    <div class="control is-expanded">
                                        <div class="select is-fullwidth is-medium">
                                            <select data-bind="options: priorities, value: selected_priority, optionsCaption: 'Select Priority'"
                                                id="priority">
                                            </select>
                                        </div>
                                    </div>
                                    <p class="help is-danger" data-bind="validationMessage: selected_priority"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Product area selector -->
                        <div class="columns">
                            <div class="column">
                                <div class="field">
                                    <label class="label">Product Area</label>
                                    <div class="control is-expanded">
                                        <div class="select is-fullwidth is-medium">
                                            <select data-bind="options: areas, value: selected_area, optionsCaption: 'Select Product Area'"
                                                id="product_area">
                                            </select>
                                        </div>
                                    </div>
                                    <p class="help is-danger" data-bind="validationMessage: selected_area"></p>
                                </div>
                            </div>

                            <!-- Deadline selector -->
                            <div class="column">
                                <div class="field">
                                    <label class="label">Deadline</label>
                                    <div class="control">
                                        <input data-bind="value: deadline" class="input flatpickr is-medium" type="date"
                                            id="deadline" />
                                    </div>
                                    <p class="help is-danger" data-bind="validationMessage: deadline"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Submit and reset buttons -->
                        <div class="field is-grouped is-grouped-centered">
                            <div class="control">
                                <button class="button is-primary" type="submit">Submit</button>
                            </div>
                            <div class="control">
                                <button class="button is-danger" type="reset">Cancel</button>
                            </div>
                            <div class="control">
                                <button class="button" data-bind="click: refresh">Refresh</button>
                            </div>
                        </div>
                        <article data-bind="visible: request_successful" class="feature-request message is-success">
                            <div class="message-body">
                                Feature request added. Thank you!
                            </div>
                        </article>
                        <article data-bind="visible: request_failed" class="feature-request message is-danger">
                            <div class="message-body">
                                Oops! The feature request failed. Please try again later.
                            </div>
                        </article>
                    </form>
                </div>
                <!-- End right section for request form -->
            </div>
        </div>
    </div>
</section>
{% endblock %}
{% block scripts %}
<script src="static/js/index.js"></script>
{% endblock %}